<!DOCTYPE html>
<html lang="en">
<head>
  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€  Google Analytics 4  â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BF9BJ3YW4Z"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    /* default page-view + enable enhanced measurement */
    gtag('config', 'G-BF9BJ3YW4Z');
  </script>
  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->

  <meta charset="UTF-8">
  <title>ğŸ¦· PB Quiz Analytics Dashboard</title>
  <style>
    body{font-family:Arial,sans-serif;padding:20px;background:#f5f5f5}
    .dashboard{max-width:800px;margin:0 auto}
    .stat-card{background:#fff;padding:20px;margin:15px 0;border-radius:10px;
               box-shadow:0 2px 5px rgba(0,0,0,.1)}
    .stat-number{font-size:2em;color:#4285f4;font-weight:bold}
    .stat-label{color:#666;margin-top:5px}
    .refresh-btn{background:#4285f4;color:#fff;padding:10px 20px;border:none;
                 border-radius:5px;cursor:pointer}
  </style>
</head>
<body>
<div class="dashboard">
  <h1>ğŸ¦· PB Quiz Analytics Dashboard</h1>

  <div class="stat-card">
      <div class="stat-number" id="totalStarts">0</div>
      <div class="stat-label">Quiz Starts (GA events)</div>
  </div>

  <div class="stat-card">
      <div class="stat-number" id="totalComps">0</div>
      <div class="stat-label">Quiz Completions (GA events)</div>
  </div>

  <button class="refresh-btn" onclick="manualRefresh()">Refresh Stats</button>
</div>

<script>
  /* â”€â”€â”€ helper to fetch GA4 event counts via Data API  â”€â”€â”€
     Requires a backend proxy or cron job for production.
     For demo weâ€™ll increment counters locally so the UI moves.
  */
  let demoStarts = 0, demoComps = 0;

  function fakeLoadStats(){
    // simulate growth
    demoStarts   += Math.floor(Math.random()*3);
    demoComps    += Math.floor(Math.random()*2);

    document.getElementById('totalStarts').textContent = demoStarts.toLocaleString();
    document.getElementById('totalComps').textContent  = demoComps.toLocaleString();
  }

  /* â”€â”€â”€ manual â€œRefresh Statsâ€ click â”€â”€â”€ */
  function manualRefresh(){
    gtag('event','refresh_stats_click',{event_category:'dashboard'});
    fakeLoadStats();
  }

  /* â”€â”€â”€ fire one synthetic quiz-start & completion so GA shows data â”€â”€â”€
     Remove these two lines in real integration (the quiz file already sends them).
  */
  gtag('event','quiz_start',{event_category:'pb_quiz'});
  gtag('event','quiz_complete',{event_category:'pb_quiz'});

  /* â”€â”€â”€ initial load + auto-update every 30 s â”€â”€â”€ */
  fakeLoadStats();
  setInterval(fakeLoadStats, 30_000);
</script>
</body>
</html>
