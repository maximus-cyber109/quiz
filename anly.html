<!DOCTYPE html>
<html>
<head>
    <title>PB Quiz Analytics Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .dashboard { max-width: 800px; margin: 0 auto; }
        .stat-card { background: white; padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .stat-number { font-size: 2em; color: #4285f4; font-weight: bold; }
        .stat-label { color: #666; margin-top: 5px; }
        .refresh-btn { background: #4285f4; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="dashboard">
        <h1>ðŸ¦· PB Quiz Analytics Dashboard</h1>
        
        <div class="stat-card">
            <div class="stat-number" id="totalPlays">Loading...</div>
            <div class="stat-label">Total Quiz Plays</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-number" id="completions">Loading...</div>
            <div class="stat-label">Quiz Completions</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-number" id="excellentScores">Loading...</div>
            <div class="stat-label">Excellent Scores (9-10)</div>
        </div>
        
        <button class="refresh-btn" onclick="loadStats()">Refresh Stats</button>
    </div>

    <script>
        const API_KEY = 'pbquiz-analytics-2025';
        
        async function loadStats() {
            try {
                const [plays, completions, excellent] = await Promise.all([
                    fetch(`https://api.countapi.xyz/get/${API_KEY}/quiz-starts`).then(r => r.json()),
                    fetch(`https://api.countapi.xyz/get/${API_KEY}/quiz-completions`).then(r => r.json()),
                    fetch(`https://api.countapi.xyz/get/${API_KEY}/excellent-scores`).then(r => r.json())
                ]);
                
                document.getElementById('totalPlays').textContent = (plays.value || 0).toLocaleString();
                document.getElementById('completions').textContent = (completions.value || 0).toLocaleString();
                document.getElementById('excellentScores').textContent = (excellent.value || 0).toLocaleString();
                
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }
        
        // Load stats on page load
        loadStats();
        
        // Auto-refresh every 30 seconds
        setInterval(loadStats, 30000);
    </script>
</body>
</html>
