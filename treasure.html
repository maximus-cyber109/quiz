<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PB QUIZ: DENTAL CHALLENGE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: linear-gradient(135deg, #0f3460 0%, #1e3c72 25%, #2a5298 50%, #4285f4 100%);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 10;
        }

        .header {
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 25px;
            border: 2px solid #4285f4;
            box-shadow: 0 0 30px rgba(66, 133, 244, 0.3);
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 32px;
            font-weight: 900;
            color: #4285f4;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #4285f4;
            animation: neon-glow 2s ease-in-out infinite alternate;
        }

        @keyframes neon-glow {
            from { text-shadow: 0 0 20px #4285f4; }
            to { text-shadow: 0 0 30px #4285f4, 0 0 40px #4285f4; }
        }

        .title {
            font-size: 20px;
            color: #fff;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(145deg, rgba(66, 133, 244, 0.2), rgba(30, 60, 114, 0.3));
            padding: 20px 15px;
            border-radius: 20px;
            border: 2px solid #4285f4;
            box-shadow: 0 8px 25px rgba(66, 133, 244, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(66, 133, 244, 0.3);
        }

        .stat-number {
            font-family: 'Orbitron', monospace;
            font-size: 28px;
            font-weight: 700;
            color: #4285f4;
            text-shadow: 0 0 10px #4285f4;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 8px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .quiz-machine {
            background: linear-gradient(145deg, rgba(66, 133, 244, 0.15), rgba(30, 60, 114, 0.25));
            border-radius: 30px;
            padding: 40px 25px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(66, 133, 244, 0.2);
            border: 3px solid #4285f4;
            position: relative;
            overflow: hidden;
        }

        .machine-title {
            font-family: 'Orbitron', monospace;
            font-size: 24px;
            color: #4285f4;
            margin-bottom: 25px;
            text-shadow: 0 0 15px #4285f4;
            animation: title-pulse 3s ease-in-out infinite;
        }

        @keyframes title-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .attempts-display {
            background: linear-gradient(145deg, #4285f4, #1976d2);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 25px;
            font-weight: 700;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.4);
        }

        .question-container {
            background: rgba(255, 255, 255, 0.95);
            color: #2c3e50;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .question-container.active {
            display: block;
            animation: question-appear 0.5s ease-out;
        }

        @keyframes question-appear {
            0% { opacity: 0; transform: translateY(20px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4285f4;
        }

        .question-number {
            font-family: 'Orbitron', monospace;
            font-size: 18px;
            font-weight: 700;
            color: #4285f4;
        }

        .timer {
            font-family: 'Orbitron', monospace;
            font-size: 24px;
            font-weight: 700;
            color: #e74c3c;
            text-shadow: 0 0 10px #e74c3c;
        }

        .question-text {
            font-size: 18px;
            margin-bottom: 25px;
            line-height: 1.6;
            font-weight: 600;
        }

        .options-container {
            display: grid;
            gap: 15px;
        }

        .option {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border: 3px solid #dee2e6;
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            border-color: #4285f4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.3);
        }

        .option.selected {
            background: linear-gradient(145deg, #4285f4, #1976d2);
            color: white;
            border-color: #1976d2;
        }

        .option.correct {
            background: linear-gradient(145deg, #28a745, #1e7e34);
            color: white;
            border-color: #1e7e34;
        }

        .option.incorrect {
            background: linear-gradient(145deg, #dc3545, #b02a37);
            color: white;
            border-color: #b02a37;
        }

        .start-button, .next-button {
            background: linear-gradient(145deg, #4285f4, #1976d2);
            color: white;
            border: none;
            padding: 20px 45px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
            box-shadow: 0 8px 25px rgba(66, 133, 244, 0.4);
            font-family: 'Exo 2', sans-serif;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        .start-button:hover, .next-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(66, 133, 244, 0.6);
        }

        .result-container {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid #4285f4;
            border-radius: 25px;
            padding: 40px 30px;
            margin-top: 25px;
            box-shadow: 0 15px 40px rgba(66, 133, 244, 0.3);
            color: #2c3e50;
        }

        .result-container.show {
            display: block;
            animation: result-celebration 1s ease-out;
        }

        @keyframes result-celebration {
            0% { opacity: 0; transform: scale(0.5) rotateY(90deg); }
            50% { transform: scale(1.1) rotateY(45deg); }
            100% { opacity: 1; transform: scale(1) rotateY(0deg); }
        }

        .result-title {
            font-family: 'Orbitron', monospace;
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 20px;
            color: #4285f4;
            text-shadow: 0 0 15px #4285f4;
            animation: result-glow 2s ease-in-out infinite alternate;
        }

        @keyframes result-glow {
            from { text-shadow: 0 0 15px #4285f4; }
            to { text-shadow: 0 0 25px #4285f4, 0 0 35px #4285f4; }
        }

        .score-display {
            font-size: 48px;
            font-weight: 900;
            color: #4285f4;
            margin: 20px 0;
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 20px #4285f4;
        }

        .reward-message {
            font-size: 18px;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.6;
        }

        .coupon-code {
            background: linear-gradient(145deg, #4285f4, #1976d2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-family: 'Orbitron', monospace;
            font-size: 24px;
            font-weight: 900;
            margin: 25px 0;
            letter-spacing: 3px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 30px rgba(66, 133, 244, 0.4);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .action-btn {
            background: linear-gradient(145deg, #6c5ce7, #5a4fcf);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Exo 2', sans-serif;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
        }

        .rules {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            text-align: left;
            font-size: 14px;
            line-height: 1.8;
            border: 2px solid #4285f4;
            box-shadow: 0 10px 30px rgba(66, 133, 244, 0.2);
        }

        .rules h3 {
            font-family: 'Orbitron', monospace;
            color: #4285f4;
            margin-bottom: 20px;
            text-align: center;
            font-size: 20px;
            text-shadow: 0 0 10px #4285f4;
        }

        .sound-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(66, 133, 244, 0.2);
            border: 2px solid #4285f4;
            border-radius: 50px;
            padding: 12px 18px;
            cursor: pointer;
            color: #4285f4;
            font-size: 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(66, 133, 244, 0.3);
        }

        .sound-control:hover {
            background: rgba(66, 133, 244, 0.3);
            transform: scale(1.1);
        }

        @media (max-width: 480px) {
            .container { padding: 15px; }
            .logo { font-size: 28px; }
            .title { font-size: 18px; }
            .quiz-machine { padding: 30px 20px; }
            .question-text { font-size: 16px; }
            .timer { font-size: 20px; }
        }
    </style>
</head>
<body>
    <!-- Sound control -->
    <div class="sound-control" onclick="toggleSound()" id="soundControl">🔊</div>

    <div class="container">
        <div class="header">
            <div class="logo">🦷 PB QUIZ 🦷</div>
            <div class="title">DENTAL KNOWLEDGE CHALLENGE</div>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-number" id="totalAttempts">5</div>
                <div class="stat-label">ATTEMPTS</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">10</div>
                <div class="stat-label">QUESTIONS</div>
            </div>
        </div>

        <div class="quiz-machine" id="quizMachine">
            <div class="machine-title">🎯 PB QUIZ CHALLENGE</div>
            
            <div class="attempts-display" id="attemptsDisplay">
                ⚡ Attempts Remaining: <span id="attemptsLeft">5</span>/5 ⚡
            </div>

            <button class="start-button" id="startButton" onclick="startQuiz()">
                🚀 START CHALLENGE
            </button>

            <div class="question-container" id="questionContainer">
                <div class="question-header">
                    <div class="question-number" id="questionNumber">Question 1 of 10</div>
                    <div class="timer" id="timer">⏰ TIME: 2:00</div>
                </div>
                <div class="question-text" id="questionText"></div>
                <div class="options-container" id="optionsContainer"></div>
                <button class="next-button" id="nextButton" onclick="nextQuestion()" style="display: none;">
                    ➡️ NEXT QUESTION
                </button>
            </div>

            <div class="result-container" id="resultContainer">
                <div class="result-title">🎉 CHALLENGE COMPLETE! 🎉</div>
                <div class="score-display" id="scoreDisplay">0/10</div>
                <div class="reward-message" id="rewardMessage"></div>
                <div class="coupon-code" id="couponCode" style="display: none;"></div>
                <div class="action-buttons">
                    <button class="action-btn" onclick="copyCode()" id="copyBtn" style="display: none;">📋 COPY REWARD CODE</button>
                    <button class="action-btn" onclick="redeemNow()">🛒 REDEEM NOW</button>
                    <button class="action-btn" onclick="shareResult()">📱 SHARE RESULTS</button>
                    <button class="action-btn" onclick="tryAgain()">🔄 TRY AGAIN</button>
                </div>
            </div>
        </div>

        <div class="rules">
            <h3>🎯 CHALLENGE RULES</h3>
            <p><strong>🦷 Test your dental knowledge:</strong> Answer 10 advanced dental questions within 2 minutes!</p>
            <p><strong>🎁 REWARD SYSTEM:</strong></p>
            <p>• <strong>1-2 Correct:</strong> Better luck next time! Keep learning! 📚</p>
            <p>• <strong>3-4 Correct:</strong> Flat 5% Off Coupon on your order 🎊</p>
            <p>• <strong>5-6 Correct:</strong> Flitt Diamond Burs Pack of 10 worth ₹499 FREE on orders above ₹2000 💎</p>
            <p>• <strong>7-8 Correct:</strong> 10% PB CASHBACK on Order 💰</p>
            <p>• <strong>9-10 Correct:</strong> FREE Speedendo Calcipro Rotary File worth ₹1250 on orders above ₹5k 🏆</p>
            <p><strong>⏰ Time Limit:</strong> 2 minutes total</p>
            <p><strong>🎯 Attempts:</strong> Maximum 5 attempts allowed</p>
            <p><strong>🔥 Each question has one correct answer</strong></p>
            <p><strong>💪 Higher scores unlock better rewards</strong></p>
            <p><strong>🎁 Earn exclusive reward codes</strong></p>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="bgMusic" loop preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+T1vWgeBy+F0PLUfSwFL33L9N2QQAoUXrPo66hVFApGn+T1vWgeBy+E0fLSgCkHLX7M9t2QQAkUXbPo66hVFApGn+T1vWgeBy+E0fLSgCkHLX7M9t2QQAoUXrTp66hUFAlFnt/0vWgfCCuBzPLYijgIGGq+8OCPOgUUXrHo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwU=" type="audio/wav">
    </audio>
    
    <!-- Super Mario Button Sounds -->
    <audio id="clickSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+T1vWgeBy+F0PLUfSwFL33L9N2QQAoUXrPo66hVFApGn+T1vWgeBy+E0fLSgCkHLX7M9t2QQAkUXbPo66hVFApGn+T1vWgeBy+E0fLSgCkHLX7M9t2QQAoUXrTp66hUFAlFnt/0vWgfCCuBzPLYijgIGGq+8OCPOgUUXrHo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwU=" type="audio/wav">
    </audio>
    
    <audio id="correctSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+T1vWgeBy+F0PLUfSwFL33L9N2QQAoUXrPo66hVFApGn+T1vWgeBy+E0fLSgCkHLX7M9t2QQAkUXbPo66hVFApGn+T1vWgeBy+E0fLSgCkHLX7M9t2QQAoUXrTp66hUFAlFnt/0vWgfCCuBzPLYijgIGGq+8OCPOgUUXrHo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwUUXrPo66hVEwlEnN/zv2kfCCuBzfPaizgIF2i87+OQOwU=" type="audio/wav">
    </audio>

    <script>
        // Hard dental professional questions
        const quizQuestions = [
            {
                question: "What is the most common cause of cracked tooth syndrome in posterior teeth?",
                options: ["Bruxism and parafunctional habits", "Excessive sugar consumption", "Poor oral hygiene", "Fluoride deficiency"],
                correct: 0
            },
            {
                question: "Which periodontal pathogen is most strongly associated with aggressive periodontitis?",
                options: ["Porphyromonas gingivalis", "Aggregatibacter actinomycetemcomitans", "Tannerella forsythia", "Treponema denticola"],
                correct: 1
            },
            {
                question: "What is the primary mechanism of action of dentin bonding agents?",
                options: ["Chemical chelation", "Micromechanical retention through hybrid layer formation", "Ionic bonding", "Van der Waals forces"],
                correct: 1
            },
            {
                question: "In endodontics, what does the term 'working length' refer to?",
                options: ["Length of the root canal file", "Distance from incisal edge to anatomical apex", "Distance from reference point to apical constriction", "Total root length"],
                correct: 2
            },
            {
                question: "Which classification system is used for furcation involvement in multirooted teeth?",
                options: ["Miller's classification", "Glickman's classification", "Kennedy's classification", "Angle's classification"],
                correct: 1
            },
            {
                question: "What is the most critical factor determining the success of immediate implant placement?",
                options: ["Implant surface texture", "Primary stability and adequate bone volume", "Patient age", "Implant diameter"],
                correct: 1
            },
            {
                question: "Which material property is most important for the longevity of posterior composite restorations?",
                options: ["Radiopacity", "Wear resistance and flexural strength", "Color stability", "Thermal conductivity"],
                correct: 1
            },
            {
                question: "What is the gold standard treatment for necrotizing ulcerative gingivitis (NUG)?",
                options: ["Chlorhexidine rinse only", "Debridement with metronidazole", "Antibiotic therapy alone", "Surgical intervention"],
                correct: 1
            },
            {
                question: "In orthodontics, what does the ANB angle measure?",
                options: ["Mandibular plane angle", "Sagittal jaw relationship", "Dental inclination", "Facial height ratio"],
                correct: 1
            },
            {
                question: "Which radiographic technique provides the highest resolution for detecting early periodontal bone loss?",
                options: ["Panoramic radiography", "Bitewing radiography with digital subtraction", "Cone beam computed tomography", "Periapical radiography"],
                correct: 1
            }
        ];

        // Game state
        let currentQuestion = 0;
        let score = 0;
        let timeLeft = 120; // 2 minutes
        let timerInterval;
        let attemptsLeft = 5;
        let isQuizActive = false;
        let soundEnabled = true;

        // Initialize game
        function initQuiz() {
            loadGameStats();
            updateAttemptsDisplay();
            startBackgroundMusic();
        }

        // Start quiz
        function startQuiz() {
            if (attemptsLeft <= 0) return;

            playMarioSound('clickSound');
            isQuizActive = true;
            currentQuestion = 0;
            score = 0;
            timeLeft = 120;

            document.getElementById('startButton').style.display = 'none';
            document.getElementById('questionContainer').classList.add('active');
            
            startTimer();
            loadQuestion();
        }

        // Load current question
        function loadQuestion() {
            if (currentQuestion >= quizQuestions.length) {
                endQuiz();
                return;
            }

            const question = quizQuestions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of 10`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });

            document.getElementById('nextButton').style.display = 'none';
        }

        // Select an option
        function selectOption(selectedIndex) {
            if (!isQuizActive) return;

            playMarioSound('clickSound');
            
            const options = document.querySelectorAll('.option');
            const question = quizQuestions[currentQuestion];
            
            options.forEach((option, index) => {
                option.onclick = null; // Disable further clicks
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('incorrect');
                } else {
                    option.style.opacity = '0.5';
                }
            });

            if (selectedIndex === question.correct) {
                score++;
                playMarioSound('correctSound');
            }

            document.getElementById('nextButton').style.display = 'block';
        }

        // Next question
        function nextQuestion() {
            playMarioSound('clickSound');
            currentQuestion++;
            
            if (currentQuestion >= quizQuestions.length) {
                endQuiz();
            } else {
                loadQuestion();
            }
        }

        // Start timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timer').textContent = 
                    `⏰ TIME: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    endQuiz();
                }
            }, 1000);
        }

        // End quiz
        function endQuiz() {
            isQuizActive = false;
            clearInterval(timerInterval);
            attemptsLeft--;
            
            document.getElementById('questionContainer').classList.remove('active');
            showResults();
            saveGameStats();
        }

        // Show results with rewards
        function showResults() {
            const resultContainer = document.getElementById('resultContainer');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const rewardMessage = document.getElementById('rewardMessage');
            const couponCode = document.getElementById('couponCode');
            const copyBtn = document.getElementById('copyBtn');
            
            scoreDisplay.textContent = `${score}/10`;
            
            let reward = getReward(score);
            rewardMessage.innerHTML = reward.message;
            
            if (reward.code) {
                couponCode.textContent = reward.code;
                couponCode.style.display = 'block';
                copyBtn.style.display = 'inline-block';
            } else {
                couponCode.style.display = 'none';
                copyBtn.style.display = 'none';
            }
            
            resultContainer.classList.add('show');
            updateAttemptsDisplay();
        }

        // Get reward based on score
        function getReward(score) {
            if (score >= 9) {
                return {
                    message: "🏆 AMAZING! You're a dental expert!<br>You won a <strong>FREE Speedendo Calcipro Rotary File worth ₹1250</strong> on orders above ₹5k!",
                    code: "CALCIPRO5K"
                };
            } else if (score >= 7) {
                return {
                    message: "💰 EXCELLENT! Great dental knowledge!<br>You earned <strong>10% PB CASHBACK</strong> on your order!",
                    code: "PBCASH124"
                };
            } else if (score >= 5) {
                return {
                    message: "💎 AWESOME! Well done!<br>You won a <strong>FREE Flitt Diamond Burs Pack of 10 worth ₹499</strong> on orders above ₹2000!",
                    code: "FLITTBUR10"
                };
            } else if (score >= 3) {
                return {
                    message: "🎊 GOOD JOB! Nice work!<br>You earned a <strong>Flat 5% Off Coupon</strong> on your order!",
                    code: "CYUIP05"
                };
            } else {
                return {
                    message: "📚 Better luck next time! Keep learning about dental health and try again!<br><strong>Every attempt makes you smarter!</strong>",
                    code: null
                };
            }
        }

        // Update attempts display
        function updateAttemptsDisplay() {
            document.getElementById('attemptsLeft').textContent = attemptsLeft;
            document.getElementById('totalAttempts').textContent = attemptsLeft;
            
            if (attemptsLeft <= 0) {
                document.getElementById('attemptsDisplay').innerHTML = 
                    '🚫 <strong>All attempts completed!</strong> You have used all your 5 attempts for PB QUIZ';
                document.getElementById('attemptsDisplay').style.background = 
                    'linear-gradient(145deg, #e74c3c, #c0392b)';
                document.getElementById('startButton').style.display = 'none';
            }
        }

        // Audio functions
        function playMarioSound(soundId) {
            if (soundEnabled) {
                const audio = document.getElementById(soundId);
                if (audio) {
                    audio.currentTime = 0;
                    audio.volume = 0.4;
                    audio.play().catch(() => {
                        // Fallback: Web Audio API beep
                        createMarioBeep(soundId);
                    });
                }
            }
        }

        // Create Mario-style beep sounds
        function createMarioBeep(soundType) {
            if (typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined') {
                const audioContext = new (AudioContext || webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Mario-style frequencies
                const frequencies = {
                    clickSound: 1000,   // High pitched click
                    correctSound: 1600, // Success sound
                    bgMusic: 440       // Background tone
                };
                
                oscillator.frequency.value = frequencies[soundType] || 800;
                oscillator.type = 'square'; // Mario-style square wave
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.15);
            }
        }

        function startBackgroundMusic() {
            if (soundEnabled) {
                const bgMusic = document.getElementById('bgMusic');
                bgMusic.volume = 0.1;
                bgMusic.play().catch(() => {});
            }
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            const control = document.getElementById('soundControl');
            const bgMusic = document.getElementById('bgMusic');
            
            if (soundEnabled) {
                control.textContent = '🔊';
                bgMusic.play().catch(() => {});
            } else {
                control.textContent = '🔇';
                bgMusic.pause();
            }
        }

        // Action functions
        function copyCode() {
            const code = document.getElementById('couponCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const btn = document.getElementById('copyBtn');
                const originalText = btn.textContent;
                btn.textContent = '📋 CODE COPIED!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        function redeemNow() {
            window.open('https://pinkblue.in', '_blank');
        }

        function shareResult() {
            const scoreText = document.getElementById('scoreDisplay').textContent;
            const text = `🦷 I just completed the PB QUIZ and scored ${scoreText}! Test your dental knowledge too! 🎯⚡`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'PB QUIZ Challenge Complete!',
                    text: text,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(text);
                alert('Result copied to share! 🎉');
            }
        }

        function tryAgain() {
            if (attemptsLeft > 0) {
                document.getElementById('resultContainer').classList.remove('show');
                document.getElementById('startButton').style.display = 'block';
                currentQuestion = 0;
                score = 0;
                timeLeft = 120;
            }
        }

        // Load and save game stats
        function loadGameStats() {
            const savedAttempts = localStorage.getItem('pbQuizAttempts');
            const lastPlayDate = localStorage.getItem('pbQuizDate');
            const today = new Date().toDateString();

            // Reset attempts daily
            if (lastPlayDate !== today) {
                attemptsLeft = 5;
                localStorage.setItem('pbQuizDate', today);
            } else if (savedAttempts) {
                attemptsLeft = parseInt(savedAttempts);
            }
        }

        function saveGameStats() {
            localStorage.setItem('pbQuizAttempts', attemptsLeft.toString());
        }

        // Initialize when page loads
        window.addEventListener('load', initQuiz);
    </script>
</body>
</html>
